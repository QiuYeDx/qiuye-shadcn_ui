{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "dot-glass",
  "title": "DotGlass",
  "type": "registry:component",
  "author": "QiuYeDx <me@qiuyedx.com>",
  "dependencies": [],
  "registryDependencies": [],
  "files": [
    {
      "type": "registry:component",
      "path": "components/qiuye-ui/dot-glass.tsx",
      "content": "\"use client\";\n\nimport React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface DotGlassProps extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * 圆点直径（像素）\n   * @default 3\n   */\n  dotSize?: number;\n  /**\n   * 点阵间距（像素）\n   * @default 6\n   */\n  dotGap?: number;\n  /**\n   * 边缘柔化（像素），值越大圆点边缘越模糊\n   * @default 0\n   */\n  dotFade?: number;\n  /**\n   * 模糊强度（像素）\n   * @default 4\n   */\n  blur?: number;\n  /**\n   * 饱和度（百分比，100 为原色）\n   * @default 130\n   */\n  saturation?: number;\n  /**\n   * 玻璃层透明度（0-1）\n   * @default 0.45\n   */\n  glassAlpha?: number;\n  /**\n   * 盖板颜色（非孔洞区域的背景色）\n   * @default \"#ffffff\"\n   */\n  coverColor?: string;\n  /**\n   * 是否使用固定定位（适用于 header 等场景）\n   * @default false\n   */\n  fixed?: boolean;\n  /**\n   * 是否使用绝对定位\n   * @default false\n   */\n  absolute?: boolean;\n  /**\n   * 是否使用粘性定位\n   * @default false\n   */\n  sticky?: boolean;\n  /**\n   * 子元素（内容）\n   */\n  children?: React.ReactNode;\n}\n\n/**\n * DotGlass 点阵开孔毛玻璃组件\n *\n * 一种\"反直觉\"的玻璃效果：只有点阵孔洞里会露出背后内容的模糊（blur），\n * 其余区域是纯色盖板遮挡。\n *\n * 实现原理：\n * - 底层玻璃层：带 backdrop-filter blur 和半透明背景\n * - 上层盖板层：纯色背景 + 反向 mask 挖出点阵孔洞\n */\nconst DotGlass = React.forwardRef<HTMLDivElement, DotGlassProps>(\n  (\n    {\n      className,\n      dotSize = 3,\n      dotGap = 6,\n      dotFade = 0,\n      blur = 4,\n      saturation = 130,\n      glassAlpha = 0.45,\n      coverColor = \"#ffffff\",\n      fixed = false,\n      absolute = false,\n      sticky = false,\n      children,\n      style,\n      ...props\n    },\n    ref\n  ) => {\n    // 计算 mask 的渐变半径\n    const dotRadius = dotSize / 2;\n    const fadeRadius = dotRadius + dotFade;\n\n    // 构建 CSS 变量\n    const cssVars = {\n      \"--dot-glass-dot-size\": `${dotSize}px`,\n      \"--dot-glass-dot-gap\": `${dotGap}px`,\n      \"--dot-glass-dot-fade\": `${dotFade}px`,\n      \"--dot-glass-blur\": `${blur}px`,\n      \"--dot-glass-sat\": `${saturation}%`,\n      \"--dot-glass-alpha\": glassAlpha,\n      \"--dot-glass-cover-color\": coverColor,\n      \"--dot-glass-dot-radius\": `${dotRadius}px`,\n      \"--dot-glass-fade-radius\": `${fadeRadius}px`,\n    } as React.CSSProperties;\n\n    // 确定定位类名\n    const positionClass = fixed\n      ? \"fixed\"\n      : absolute\n        ? \"absolute\"\n        : sticky\n          ? \"sticky\"\n          : \"relative\";\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\"dot-glass\", positionClass, className)}\n        style={{ ...cssVars, ...style }}\n        {...props}\n      >\n        {/* 1. 玻璃层：blur + 半透明背景 */}\n        <div\n          className=\"dot-glass-blur-layer absolute inset-0 pointer-events-none\"\n          style={{\n            background: `rgba(255, 255, 255, var(--dot-glass-alpha))`,\n            backdropFilter: `saturate(var(--dot-glass-sat)) blur(var(--dot-glass-blur))`,\n            WebkitBackdropFilter: `saturate(var(--dot-glass-sat)) blur(var(--dot-glass-blur))`,\n            zIndex: 1,\n          }}\n        />\n\n        {/* 2. 盖板层：纯色 + 反向 mask 挖孔 */}\n        <div\n          className=\"dot-glass-cover-layer absolute inset-0 pointer-events-none\"\n          style={{\n            background: \"var(--dot-glass-cover-color)\",\n            maskImage: `radial-gradient(circle, transparent var(--dot-glass-dot-radius), #fff var(--dot-glass-fade-radius))`,\n            maskSize: `var(--dot-glass-dot-gap) var(--dot-glass-dot-gap)`,\n            maskRepeat: \"repeat\",\n            maskPosition: \"center\",\n            WebkitMaskImage: `radial-gradient(circle, transparent var(--dot-glass-dot-radius), #fff var(--dot-glass-fade-radius))`,\n            WebkitMaskSize: `var(--dot-glass-dot-gap) var(--dot-glass-dot-gap)`,\n            WebkitMaskRepeat: \"repeat\",\n            WebkitMaskPosition: \"center\",\n            zIndex: 2,\n          }}\n        />\n\n        {/* 3. 内容层 */}\n        <div className=\"dot-glass-content relative\" style={{ zIndex: 3 }}>\n          {children}\n        </div>\n      </div>\n    );\n  }\n);\n\nDotGlass.displayName = \"DotGlass\";\n\nexport { DotGlass };\n"
    }
  ]
}
